<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ… ç•ªèŒ„ç‹å›½çš„è‡ªç„¶ç¬”è®°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #FEFBF5;
            background-image: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: #FF6347;
            color: white;
        }

        .btn-secondary {
            background: #4CAF50;
            color: white;
        }

        .btn-outline {
            background: white;
            color: #FF6347;
            border: 2px solid #FF6347;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            transition: all 0.3s;
        }

        /* é¡µé¢åˆ‡æ¢ */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* é¦–é¡µæ ·å¼ */
        .hero {
            text-align: center;
            margin: 60px 0;
        }

        .hero h1 {
            font-size: 48px;
            color: #FF6347;
            margin-bottom: 16px;
        }

        .hero p {
            font-size: 18px;
            color: #666;
            margin: 8px 0;
        }

        .entrance-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
            margin: 40px 0;
        }

        .entrance-card {
            cursor: pointer;
            text-align: center;
            padding: 48px 32px;
        }

        .entrance-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            transition: transform 0.3s;
        }

        .entrance-card:hover .entrance-icon {
            transform: scale(1.1);
        }

        .student-icon {
            background: linear-gradient(135deg, #60A5FA, #3B82F6);
        }

        .teacher-icon {
            background: linear-gradient(135deg, #C084FC, #9333EA);
        }

        /* çŠ¶æ€æŒ‡ç¤ºç¯ */
        .status-light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .status-normal { background: #4CAF50; }
        .status-warning { background: #FFC107; }
        .status-error { background: #F44336; }

        /* è¡¨æ ¼æ ·å¼ */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: #f5f5f5;
            font-weight: bold;
        }

        tr:hover {
            background: #f9f9f9;
        }

        /* è¾“å…¥æ¡†æ ·å¼ */
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            margin-top: 8px;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #FF6347;
        }

        /* æ»‘å—æ ·å¼ */
        .slider-container {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 24px;
            background: linear-gradient(135deg, #E0F2FE, #DBEAFE);
            border-radius: 16px;
        }

        .slider-vertical {
            writing-mode: bt-lr;
            -webkit-appearance: slider-vertical;
            width: 48px;
            height: 300px;
        }

        .height-display {
            font-size: 48px;
            font-weight: bold;
            color: #FF6347;
        }

        /* æ­¥è¿›å™¨ */
        .stepper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin: 16px 0;
        }

        .stepper button {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .stepper-minus {
            background: #E5E7EB;
        }

        .stepper-plus {
            background: #4CAF50;
            color: white;
        }

        .stepper-value {
            font-size: 32px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }

        /* å¾½ç«  */
        .badge {
            display: inline-block;
            background: #FEF3C7;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 14px;
            margin: 4px;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 16px;
            background: #E5E7EB;
            border-radius: 8px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #66BB6A);
            transition: width 0.5s;
        }

        /* ç½‘æ ¼å¸ƒå±€ */
        .grid {
            display: grid;
            gap: 16px;
        }

        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }

        @media (max-width: 768px) {
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }
        }

        /* å¯¼èˆªæ  */
        .nav-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        /* ç»Ÿè®¡å¡ç‰‡ */
        .stat-card {
            text-align: center;
            padding: 20px;
        }

        .stat-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #333;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 4px;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 32px;
            max-width: 500px;
            width: 100%;
        }

        /* æ¤æ ªå¯è§†åŒ– */
        .plant-visual {
            text-align: center;
            padding: 24px;
            background: linear-gradient(180deg, #E0F2FE, #FEFBF5);
            border-radius: 16px;
        }

        .plant-container {
            height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            position: relative;
        }

        .plant-parts {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.5s;
        }

        .soil {
            width: 200px;
            height: 40px;
            background: linear-gradient(180deg, #92400E, #78350F);
            border-radius: 8px 8px 0 0;
        }

        /* å›¾è¡¨æ ·å¼ */
        .chart-container {
            position: relative;
            height: 300px;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 12px;
        }

        .chart-canvas {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¦–é¡µ -->
        <div id="landing" class="page active">
            <div class="hero animate-float">
                <h1>ğŸ… ç•ªèŒ„ç‹å›½ ğŸ…</h1>
                <p style="font-size: 24px; margin: 16px 0;">æ¬¢è¿æ¥åˆ°è‡ªç„¶ç¬”è®°</p>
                <p>è®°å½•æˆé•¿ï¼Œè§è¯ç”Ÿå‘½çš„å¥‡è¿¹</p>
            </div>

            <div class="entrance-cards">
                <div class="card card-hover entrance-card" onclick="goToStudent()">
                    <div class="entrance-icon student-icon">ğŸ”</div>
                    <h2 style="font-size: 28px; margin-bottom: 16px;">æˆ‘æ˜¯æ¢ç§˜è€…</h2>
                    <p style="color: #666; margin-bottom: 24px;">æ‹¿èµ·æ”¾å¤§é•œï¼Œå¼€å§‹æˆ‘çš„è§‚å¯Ÿæ—¥è®°</p>
                    <div style="font-size: 48px; margin: 16px 0;">ğŸ‘¦</div>
                    <button class="btn btn-primary" style="width: 100%;">è¿›å…¥æ¢ç§˜</button>
                </div>

                <div class="card card-hover entrance-card" onclick="goToTeacher()">
                    <div class="entrance-icon teacher-icon">ğŸ›¡ï¸</div>
                    <h2 style="font-size: 28px; margin-bottom: 16px;">æˆ‘æ˜¯å®ˆæŠ¤è€…</h2>
                    <p style="color: #666; margin-bottom: 24px;">ç”¨å¿ƒå®ˆæŠ¤ï¼Œè§è¯æ¯ä¸€ä¸ªæˆé•¿ç¬é—´</p>
                    <div style="font-size: 48px; margin: 16px 0;">ğŸ‘¨â€ğŸ«</div>
                    <button class="btn btn-secondary" style="width: 100%;">è¿›å…¥ç®¡ç†</button>
                </div>
            </div>

            <div class="card" style="text-align: center; background: white; box-shadow: 0 4px 12px rgba(255,99,71,0.3);">
                <p style="font-size: 18px; color: #333;">
                    ğŸ‰ å…¨æ ¡å·²ç§æ¤ <span style="font-weight: bold; color: #FF6347;" id="totalPlants">0</span> æ£µç•ªèŒ„ï¼Œ
                    ç´¯è®¡é•¿é«˜ <span style="font-weight: bold; color: #4CAF50;" id="totalHeight">0</span> å˜ç±³ï¼
                </p>
            </div>
        </div>

        <!-- å­¦ç”Ÿæ§åˆ¶å° -->
        <div id="student-dashboard" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToLanding()">â† è¿”å›é¦–é¡µ</button>
            </div>

            <div class="card">
                <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #FF6347, #FF4500); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px;">
                            <span id="studentAvatar">ğŸ‘¦</span>
                        </div>
                        <div>
                            <h2 style="font-size: 24px; margin-bottom: 4px;" id="studentName">å°æ˜</h2>
                            <p style="color: #666;">ç­‰çº§ <span id="studentLevel">5</span> Â· å®šæ¤ç¬¬ <span id="studentDays">15</span> å¤©</p>
                        </div>
                    </div>
                    <div id="studentBadges" style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <!-- å‹‹ç« åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <div class="grid grid-2" style="margin-top: 24px;">
                <!-- å·¦ä¾§ï¼šç•ªèŒ„çŠ¶æ€ -->
                <div>
                    <div class="card">
                        <h3 style="font-size: 20px; margin-bottom: 16px;">ğŸŒ± æˆ‘çš„ç•ªèŒ„</h3>
                        
                        <div style="margin-bottom: 24px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span style="font-size: 24px;" id="stageEmoji">ğŸŒ±</span>
                                <span style="font-weight: bold; font-size: 18px;" id="stageName">å¹¼è‹—æœŸ</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="stageProgress" style="width: 60%;"></div>
                            </div>
                        </div>

                        <div class="plant-visual">
                            <div class="plant-container" id="plantContainer">
                                <!-- æ¤æ ªåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>

                        <div class="grid grid-4" style="margin-top: 24px;">
                            <div class="stat-card">
                                <div class="stat-icon">ğŸ“</div>
                                <div class="stat-value" id="currentHeight">0</div>
                                <div class="stat-label">æ ªé«˜(cm)</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">ğŸƒ</div>
                                <div class="stat-value" id="currentLeaves">0</div>
                                <div class="stat-label">å¶ç‰‡</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">ğŸŒ¸</div>
                                <div class="stat-value" id="currentFlowers">0</div>
                                <div class="stat-label">èŠ±æœµ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">ğŸ…</div>
                                <div class="stat-value" id="currentFruits">0</div>
                                <div class="stat-label">æœå®</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å³ä¾§ï¼šä»»åŠ¡å’Œæ“ä½œ -->
                <div>
                    <div class="card" style="background: linear-gradient(135deg, #FEF3C7, #FDE68A);">
                        <h3 style="font-size: 20px; margin-bottom: 16px;">ğŸ“‹ ä»Šæ—¥ä»»åŠ¡</h3>
                        <div id="dailyTask">
                            <!-- ä»»åŠ¡åŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <h3 style="font-size: 20px; margin-bottom: 16px;">å¿«æ·æ“ä½œ</h3>
                        <div class="grid grid-2">
                            <button class="btn btn-primary" onclick="goToDataEntry()" style="padding: 32px 16px; display: flex; flex-direction: column; align-items: center; gap: 12px;">
                                <span style="font-size: 32px;">ğŸ“</span>
                                <span>è®°å½•æ•°æ®</span>
                            </button>
                            <button class="btn btn-secondary" onclick="goToVisualization()" style="padding: 32px 16px; display: flex; flex-direction: column; align-items: center; gap: 12px;">
                                <span style="font-size: 32px;">ğŸ“Š</span>
                                <span>æŸ¥çœ‹å›¾è¡¨</span>
                            </button>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <h3 style="font-size: 20px; margin-bottom: 16px;">ğŸ† æˆ‘çš„æˆå°±</h3>
                        <div class="grid grid-3" id="achievementGrid">
                            <!-- æˆå°±åŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•°æ®å½•å…¥é¡µ -->
        <div id="data-entry" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToStudent()">â† è¿”å›æ§åˆ¶å°</button>
            </div>

            <div class="card">
                <h2 style="font-size: 28px; margin-bottom: 24px;">ğŸ”¬ ç”Ÿé•¿è®°å½•å®éªŒå®¤</h2>
                
                <form onsubmit="saveRecord(event)">
                    <div style="margin-bottom: 32px;">
                        <label style="font-weight: bold; font-size: 18px;">ğŸ“… è®°å½•æ—¥æœŸ</label>
                        <input type="date" id="recordDate" required>
                    </div>

                    <div style="margin-bottom: 32px;">
                        <label style="font-weight: bold; font-size: 18px; display: block; margin-bottom: 16px;">ğŸ“ æ ªé«˜æµ‹é‡</label>
                        <div class="slider-container">
                            <div style="display: flex; flex-direction: column; gap: 40px; color: #999;">
                                <span>100cm</span>
                                <span>75cm</span>
                                <span>50cm</span>
                                <span>25cm</span>
                                <span>0cm</span>
                            </div>
                            <input type="range" min="0" max="100" value="20" class="slider-vertical" id="heightSlider" oninput="updateHeightDisplay()">
                            <div style="font-size: 64px;">ğŸŒ±</div>
                            <div>
                                <div class="height-display" id="heightDisplay">20</div>
                                <div style="color: #666;">å˜ç±³</div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-3" style="margin-bottom: 32px;">
                        <div class="card">
                            <label style="font-weight: bold; text-align: center; display: block; margin-bottom: 16px;">
                                <span style="font-size: 32px;">ğŸƒ</span><br>å¶ç‰‡æ•°
                            </label>
                            <div class="stepper">
                                <button type="button" class="stepper-minus" onclick="changeStepper('leaves', -1)">âˆ’</button>
                                <div class="stepper-value" id="leavesValue">4</div>
                                <button type="button" class="stepper-plus" onclick="changeStepper('leaves', 1)">+</button>
                            </div>
                        </div>
                        <div class="card">
                            <label style="font-weight: bold; text-align: center; display: block; margin-bottom: 16px;">
                                <span style="font-size: 32px;">ğŸŒ¸</span><br>èŠ±æœµæ•°
                            </label>
                            <div class="stepper">
                                <button type="button" class="stepper-minus" onclick="changeStepper('flowers', -1)">âˆ’</button>
                                <div class="stepper-value" id="flowersValue">0</div>
                                <button type="button" class="stepper-plus" onclick="changeStepper('flowers', 1)">+</button>
                            </div>
                        </div>
                        <div class="card">
                            <label style="font-weight: bold; text-align: center; display: block; margin-bottom: 16px;">
                                <span style="font-size: 32px;">ğŸ…</span><br>æœå®æ•°
                            </label>
                            <div class="stepper">
                                <button type="button" class="stepper-minus" onclick="changeStepper('fruits', -1)">âˆ’</button>
                                <div class="stepper-value" id="fruitsValue">0</div>
                                <button type="button" class="stepper-plus" onclick="changeStepper('fruits', 1)">+</button>
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 32px;">
                        <label style="font-weight: bold; font-size: 18px;">ğŸ“ è§‚å¯Ÿç¬”è®°</label>
                        <textarea id="notes" rows="4" placeholder="ä»Šå¤©ç•ªèŒ„æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿæˆ‘åšäº†ä»€ä¹ˆ..."></textarea>
                    </div>

                    <div class="grid grid-2">
                        <button type="button" class="btn btn-outline" onclick="goToStudent()">å–æ¶ˆ</button>
                        <button type="submit" class="btn btn-primary">ğŸ’¾ ä¿å­˜è®°å½•</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- æ•°æ®å¯è§†åŒ–é¡µ -->
        <div id="visualization" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToStudent()">â† è¿”å›æ§åˆ¶å°</button>
            </div>

            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap;">
                    <h2 style="font-size: 28px;">ğŸ“Š æ•°æ®å¯è§†åŒ–å¤§å…</h2>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="showAverage" onchange="renderChart()">
                        <span>æ˜¾ç¤ºå…¨ç­å¹³å‡</span>
                    </label>
                </div>

                <div class="card" style="background: #f9f9f9;">
                    <h3 style="margin-bottom: 16px;">ğŸ“ˆ æ ªé«˜ç”Ÿé•¿æ›²çº¿</h3>
                    <canvas id="growthChart" class="chart-canvas" width="800" height="300"></canvas>
                </div>

                <div class="grid grid-3" style="margin-top: 24px;">
                    <div class="card" style="background: linear-gradient(135deg, #D1FAE5, #A7F3D0);">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸƒ</div>
                            <div class="stat-value" id="totalLeaves">0</div>
                            <div class="stat-label">å¶ç‰‡æ€»æ•°</div>
                        </div>
                    </div>
                    <div class="card" style="background: linear-gradient(135deg, #FCE7F3, #FBCFE8);">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸŒ¸</div>
                            <div class="stat-value" id="totalFlowers">0</div>
                            <div class="stat-label">èŠ±æœµæ€»æ•°</div>
                        </div>
                    </div>
                    <div class="card" style="background: linear-gradient(135deg, #FED7AA, #FDBA74);">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ…</div>
                            <div class="stat-value" id="totalFruits">0</div>
                            <div class="stat-label">æœå®æ€»æ•°</div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 24px;">
                    <h3 style="margin-bottom: 16px;">ğŸ’¡ æ•°æ®æ´å¯Ÿ</h3>
                    <div id="insights">
                        <!-- æ´å¯ŸåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <div style="margin-top: 24px;">
                    <h3 style="margin-bottom: 16px;">ğŸ“‹ å†å²è®°å½•</h3>
                    <div style="overflow-x: auto;">
                        <table id="recordTable">
                            <thead>
                                <tr>
                                    <th>æ—¥æœŸ</th>
                                    <th>å¤©æ•°</th>
                                    <th>æ ªé«˜</th>
                                    <th>å¶ç‰‡</th>
                                    <th>èŠ±æœµ</th>
                                    <th>æœå®</th>
                                    <th>å¢é•¿</th>
                                </tr>
                            </thead>
                            <tbody id="recordTableBody">
                                <!-- è®°å½•åŠ¨æ€ç”Ÿæˆ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•™å¸ˆç›‘æ§èˆ± -->
        <div id="teacher-dashboard" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToLanding()">â† è¿”å›é¦–é¡µ</button>
            </div>

            <h1 style="font-size: 32px; margin-bottom: 8px;">ğŸ¯ å…¨æ™¯ç›‘æ§èˆ±</h1>
            <p style="color: #666; margin-bottom: 32px;">ç­çº§ç•ªèŒ„ç§æ¤å…¨æ™¯ç®¡ç†</p>

            <div class="grid grid-5" style="margin-bottom: 32px;">
                <div class="card" style="background: linear-gradient(135deg, #DBEAFE, #BFDBFE);">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ‘¥</div>
                        <div class="stat-value" id="teacherTotalStudents">0</div>
                        <div class="stat-label">å­¦ç”Ÿæ€»æ•°</div>
                    </div>
                </div>
                <div class="card" style="background: linear-gradient(135deg, #D1FAE5, #A7F3D0);">
                    <div class="stat-card">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-value" id="teacherActiveStudents">0</div>
                        <div class="stat-label">æ­£å¸¸è®°å½•</div>
                    </div>
                </div>
                <div class="card" style="background: linear-gradient(135deg, #FEF3C7, #FDE68A);">
                    <div class="stat-card">
                        <div class="stat-icon">âš ï¸</div>
                        <div class="stat-value" id="teacherWarningStudents">0</div>
                        <div class="stat-label">å¾…æé†’</div>
                    </div>
                </div>
                <div class="card" style="background: linear-gradient(135deg, #FECACA, #FCA5A5);">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸš¨</div>
                        <div class="stat-value" id="teacherErrorStudents">0</div>
                        <div class="stat-label">æ•°æ®å¼‚å¸¸</div>
                    </div>
                </div>
                <div class="card" style="background: linear-gradient(135deg, #E9D5FF, #D8B4FE);">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“</div>
                        <div class="stat-value" id="teacherAvgHeight">0</div>
                        <div class="stat-label">å¹³å‡æ ªé«˜(cm)</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 style="font-size: 24px; margin-bottom: 24px;">å­¦ç”Ÿåˆ—è¡¨</h2>
                <div id="teacherStudentList">
                    <!-- å­¦ç”Ÿåˆ—è¡¨åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>

        <!-- é¢„æµ‹å¼¹çª— -->
        <div id="predictionModal" class="modal">
            <div class="modal-content animate-float">
                <h3 style="font-size: 24px; margin-bottom: 16px;">ğŸ¤” æ¢ç©¶æ€§æé—®</h3>
                <p style="font-size: 18px; margin-bottom: 24px;">ä½ é¢„æµ‹ä»Šå¤©ç•ªèŒ„é•¿é«˜äº†å—ï¼Ÿ</p>
                <div class="grid grid-2">
                    <button class="btn btn-secondary" onclick="answerPrediction(true)">ğŸ‘ æ˜¯çš„ï¼Œé•¿é«˜äº†</button>
                    <button class="btn btn-outline" onclick="answerPrediction(false)">ğŸ‘ æ²¡æœ‰å˜åŒ–</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ•°æ®å­˜å‚¨
        let appData = {
            currentUser: { id: 1, role: 'student' },
            prediction: null,
            students: [
                {
                    id: 1,
                    name: 'å°æ˜',
                    avatar: 'ğŸ‘¦',
                    level: 5,
                    plantingDate: '2024-01-01',
                    badges: ['å…¨å‹¤è®°å½•å¥–', 'åˆæ¬¡å¼€èŠ±çºªå¿µ'],
                    records: []
                },
                {
                    id: 2,
                    name: 'å°çº¢',
                    avatar: 'ğŸ‘§',
                    level: 4,
                    plantingDate: '2024-01-01',
                    badges: ['å…¨å‹¤è®°å½•å¥–'],
                    records: []
                }
            ]
        };

        // åˆå§‹åŒ–
        function init() {
            // ç”Ÿæˆç¤ºä¾‹æ•°æ®
            generateSampleData();
            
            // åŠ è½½æ•°æ®
            loadFromLocalStorage();
            
            // æ›´æ–°é¦–é¡µç»Ÿè®¡
            updateLandingStats();
            
            // è®¾ç½®é»˜è®¤æ—¥æœŸ
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('recordDate').value = today;
        }

        // ç”Ÿæˆç¤ºä¾‹æ•°æ®
        function generateSampleData() {
            const start = new Date('2024-01-01');
            appData.students[0].records = [];
            appData.students[1].records = [];
            
            for (let i = 0; i < 15; i++) {
                const date = new Date(start);
                date.setDate(date.getDate() + i);
                appData.students[0].records.push({
                    date: date.toISOString().split('T')[0],
                    height: Math.floor(5 + i * 1.5 + Math.random() * 2),
                    leaves: Math.floor(2 + i * 0.5),
                    flowers: i > 10 ? Math.floor(Math.random() * 3) : 0,
                    fruits: 0,
                    notes: ''
                });
            }
            
            for (let i = 0; i < 12; i++) {
                const date = new Date(start);
                date.setDate(date.getDate() + i);
                appData.students[1].records.push({
                    date: date.toISOString().split('T')[0],
                    height: Math.floor(5 + i * 1.3 + Math.random() * 2),
                    leaves: Math.floor(2 + i * 0.4),
                    flowers: i > 8 ? Math.floor(Math.random() * 2) : 0,
                    fruits: 0,
                    notes: ''
                });
            }
        }

        // LocalStorage
        function saveToLocalStorage() {
            localStorage.setItem('tomatoKingdom', JSON.stringify(appData));
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('tomatoKingdom');
            if (saved) {
                appData = JSON.parse(saved);
            }
        }

        // é¡µé¢å¯¼èˆª
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function goToLanding() {
            showPage('landing');
            updateLandingStats();
        }

        function goToStudent() {
            showPage('student-dashboard');
            loadStudentDashboard();
        }

        function goToTeacher() {
            showPage('teacher-dashboard');
            loadTeacherDashboard();
        }

        function goToDataEntry() {
            showPage('data-entry');
            // æ˜¾ç¤ºé¢„æµ‹å¼¹çª—
            document.getElementById('predictionModal').classList.add('active');
        }

        function goToVisualization() {
            showPage('visualization');
            loadVisualization();
        }

        // é¢„æµ‹åŠŸèƒ½
        function answerPrediction(willGrow) {
            appData.prediction = willGrow;
            document.getElementById('predictionModal').classList.remove('active');
        }

        // æ›´æ–°é¦–é¡µç»Ÿè®¡
        function updateLandingStats() {
            const totalPlants = appData.students.length;
            const totalHeight = appData.students.reduce((sum, s) => {
                const last = s.records[s.records.length - 1];
                return sum + (last ? last.height : 0);
            }, 0);
            
            document.getElementById('totalPlants').textContent = totalPlants;
            document.getElementById('totalHeight').textContent = totalHeight;
        }

        // åŠ è½½å­¦ç”Ÿæ§åˆ¶å°
        function loadStudentDashboard() {
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            if (!student) return;
            
            document.getElementById('studentAvatar').textContent = student.avatar;
            document.getElementById('studentName').textContent = student.name;
            document.getElementById('studentLevel').textContent = student.level;
            
            const days = getDaysSince(student.plantingDate);
            document.getElementById('studentDays').textContent = days;
            
            // å‹‹ç« 
            const badgesHtml = student.badges.map(b => `<span class="badge">ğŸ† ${b}</span>`).join('');
            document.getElementById('studentBadges').innerHTML = badgesHtml;
            
            // ç”Ÿé•¿é˜¶æ®µ
            const stage = getGrowthStage(days);
            document.getElementById('stageEmoji').textContent = stage.emoji;
            document.getElementById('stageName').textContent = stage.name;
            document.getElementById('stageProgress').style.width = stage.progress + '%';
            
            // å½“å‰æ•°æ®
            const lastRecord = student.records[student.records.length - 1] || { height: 0, leaves: 0, flowers: 0, fruits: 0 };
            document.getElementById('currentHeight').textContent = lastRecord.height;
            document.getElementById('currentLeaves').textContent = lastRecord.leaves;
            document.getElementById('currentFlowers').textContent = lastRecord.flowers;
            document.getElementById('currentFruits').textContent = lastRecord.fruits;
            
            // æ¸²æŸ“æ¤æ ª
            renderPlant(days, lastRecord.height);
            
            // æ¯æ—¥ä»»åŠ¡
            const today = new Date().toISOString().split('T')[0];
            const hasToday = student.records.some(r => r.date === today);
            
            if (!hasToday) {
                document.getElementById('dailyTask').innerHTML = `
                    <div class="card" style="background: white; border: 2px dashed #FF6347;">
                        <p style="font-size: 18px; margin-bottom: 12px;">ğŸŒ± ä»»åŠ¡ï¼šå»çœ‹çœ‹ä½ çš„ç•ªèŒ„æ€ä¹ˆæ ·äº†ï¼Ÿ</p>
                        <p style="color: #666; margin-bottom: 16px;">ä»Šå¤©è¿˜æ²¡æœ‰è®°å½•æ•°æ®å“¦ï¼</p>
                        <button class="btn btn-primary" onclick="goToDataEntry()" style="width: 100%;">âœï¸ å¼€å§‹è®°å½•</button>
                    </div>
                `;
            } else {
                document.getElementById('dailyTask').innerHTML = `
                    <div class="card" style="background: white;">
                        <p style="font-size: 18px; margin-bottom: 8px;">âœ… ä»Šæ—¥ä»»åŠ¡å·²å®Œæˆï¼</p>
                        <p style="color: #666;">ç»§ç»­ä¿æŒï¼Œæ˜å¤©è§ï¼</p>
                    </div>
                `;
            }
            
            // æˆå°±
            const achievementHtml = student.badges.map(b => `
                <div style="text-align: center;">
                    <div style="width: 64px; height: 64px; background: #FEF3C7; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; margin: 0 auto 8px;">ğŸ†</div>
                    <p style="font-size: 12px; color: #666;">${b}</p>
                </div>
            `).join('') + `
                <div style="text-align: center; opacity: 0.5;">
                    <div style="width: 64px; height: 64px; background: #F3F4F6; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; margin: 0 auto 8px;">â“</div>
                    <p style="font-size: 12px; color: #999;">å¾…è§£é”</p>
                </div>
            `;
            document.getElementById('achievementGrid').innerHTML = achievementHtml;
        }

        // æ¸²æŸ“æ¤æ ª
        function renderPlant(days, height) {
            const stage = getGrowthStage(days);
            const plantHeight = Math.min(height * 2, 200);
            
            let partsHtml = '';
            
            if (stage.emoji === 'ğŸ…') {
                partsHtml += '<div style="font-size: 24px; margin-bottom: 8px;">ğŸ… ğŸ…</div>';
            }
            if (stage.emoji === 'ğŸŒ¸') {
                partsHtml += '<div style="font-size: 20px; margin-bottom: 8px;">ğŸŒ¸ ğŸŒ¸ ğŸŒ¸</div>';
            }
            partsHtml += '<div style="font-size: 28px; margin-bottom: 8px;">ğŸƒ ğŸƒ</div>';
            partsHtml += `<div style="width: 8px; height: ${plantHeight}px; background: linear-gradient(180deg, #16A34A, #15803D); border-radius: 4px;"></div>`;
            
            document.getElementById('plantContainer').innerHTML = `
                <div class="plant-parts" style="height: ${plantHeight + 60}px;">${partsHtml}</div>
                <div class="soil"></div>
            `;
        }

        // è·å–å¤©æ•°
        function getDaysSince(dateStr) {
            const start = new Date(dateStr);
            const today = new Date();
            const diff = today - start;
            return Math.ceil(diff / (1000 * 60 * 60 * 24));
        }

        // è·å–ç”Ÿé•¿é˜¶æ®µ
        function getGrowthStage(days) {
            if (days < 7) return { name: 'å¹¼è‹—æœŸ', emoji: 'ğŸŒ±', progress: (days / 7) * 100 };
            if (days < 30) return { name: 'æˆé•¿æœŸ', emoji: 'ğŸŒ¿', progress: ((days - 7) / 23) * 100 };
            if (days < 50) return { name: 'å¼€èŠ±æœŸ', emoji: 'ğŸŒ¸', progress: ((days - 30) / 20) * 100 };
            return { name: 'ç»“æœæœŸ', emoji: 'ğŸ…', progress: Math.min(((days - 50) / 30) * 100, 100) };
        }

        // æ»‘å—æ›´æ–°
        function updateHeightDisplay() {
            const value = document.getElementById('heightSlider').value;
            document.getElementById('heightDisplay').textContent = value;
        }

        // æ­¥è¿›å™¨
        function changeStepper(field, delta) {
            const elem = document.getElementById(field + 'Value');
            let value = parseInt(elem.textContent) + delta;
            value = Math.max(0, value);
            elem.textContent = value;
        }

        // ä¿å­˜è®°å½•
        function saveRecord(e) {
            e.preventDefault();
            
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            const record = {
                date: document.getElementById('recordDate').value,
                height: parseInt(document.getElementById('heightSlider').value),
                leaves: parseInt(document.getElementById('leavesValue').textContent),
                flowers: parseInt(document.getElementById('flowersValue').textContent),
                fruits: parseInt(document.getElementById('fruitsValue').textContent),
                notes: document.getElementById('notes').value
            };
            
            // éªŒè¯æ•°æ®
            const lastRecord = student.records[student.records.length - 1];
            if (lastRecord && record.height < lastRecord.height - 5) {
                alert('âš ï¸ æ•°æ®å¯èƒ½æœ‰è¯¯ï¼šç•ªèŒ„ä¸å¤ªå¯èƒ½ä¸€å¤œä¹‹é—´å˜çŸ®å“¦ï¼');
                return;
            }
            
            // æ£€æŸ¥é¢„æµ‹
            if (appData.prediction !== null && lastRecord) {
                const growth = record.height - lastRecord.height;
                const correct = (appData.prediction && growth > 0) || (!appData.prediction && growth <= 0);
                if (correct) {
                    alert(`ğŸ‰ å“‡ï¼æ¯”æ˜¨å¤©é•¿äº† ${growth}cmï¼Œä½ çš„é¢„æµ‹æ˜¯å¯¹çš„ï¼`);
                } else {
                    alert(`ğŸ¤” æ¯”æ˜¨å¤©é•¿äº† ${growth}cmï¼Œå’Œé¢„æµ‹ä¸å¤ªä¸€æ ·å‘¢ã€‚ä¸‹æ¬¡å†è§‚å¯Ÿçœ‹çœ‹ï¼`);
                }
            }
            
            student.records.push(record);
            saveToLocalStorage();
            
            alert('âœ… è®°å½•ä¿å­˜æˆåŠŸï¼');
            goToStudent();
        }

        // åŠ è½½å¯è§†åŒ–
        function loadVisualization() {
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            if (!student || student.records.length === 0) return;
            
            const lastRecord = student.records[student.records.length - 1];
            document.getElementById('totalLeaves').textContent = lastRecord.leaves;
            document.getElementById('totalFlowers').textContent = lastRecord.flowers;
            document.getElementById('totalFruits').textContent = lastRecord.fruits;
            
            // æ¸²æŸ“å›¾è¡¨
            renderChart();
            
            // ç”Ÿæˆæ´å¯Ÿ
            generateInsights();
            
            // å†å²è®°å½•è¡¨æ ¼
            renderRecordTable();
        }

        // æ¸²æŸ“å›¾è¡¨
        function renderChart() {
            const canvas = document.getElementById('growthChart');
            const ctx = canvas.getContext('2d');
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const padding = 50;
            const chartWidth = canvas.width - padding * 2;
            const chartHeight = canvas.height - padding * 2;
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.stroke();
            
            // ç»˜åˆ¶ç½‘æ ¼
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding + (chartHeight / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(canvas.width - padding, y);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶æ•°æ®
            if (student.records.length > 0) {
                const maxHeight = Math.max(...student.records.map(r => r.height));
                const xStep = chartWidth / (student.records.length - 1 || 1);
                
                ctx.strokeStyle = '#FF6347';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                student.records.forEach((record, i) => {
                    const x = padding + xStep * i;
                    const y = canvas.height - padding - (record.height / maxHeight) * chartHeight;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    // ç»˜åˆ¶æ•°æ®ç‚¹
                    ctx.fillStyle = '#FF6347';
                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                ctx.stroke();
            }
            
            // ç»˜åˆ¶æ ‡ç­¾
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('å¤©æ•°', canvas.width / 2, canvas.height - 10);
            
            ctx.save();
            ctx.translate(15, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('é«˜åº¦(cm)', 0, 0);
            ctx.restore();
        }

        // ç”Ÿæˆæ´å¯Ÿ
        function generateInsights() {
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            if (student.records.length < 2) return;
            
            let insights = [];
            
            // æœ€å¿«ç”Ÿé•¿æœŸ
            let maxGrowth = 0;
            let maxPeriod = { start: 0, end: 0 };
            for (let i = 1; i < student.records.length; i++) {
                const growth = student.records[i].height - student.records[i-1].height;
                if (growth > maxGrowth) {
                    maxGrowth = growth;
                    maxPeriod = { start: i-1, end: i };
                }
            }
            
            if (maxGrowth > 0) {
                insights.push({
                    emoji: 'ğŸ“ˆ',
                    text: `ä½ çš„ç•ªèŒ„åœ¨ç¬¬${maxPeriod.start+1}å¤©åˆ°ç¬¬${maxPeriod.end+1}å¤©ç”Ÿé•¿é€Ÿåº¦æœ€å¿«ï¼Œé•¿äº†${maxGrowth}cmï¼é‚£å‡ å¤©å‘ç”Ÿäº†ä»€ä¹ˆç‰¹åˆ«çš„äº‹å—ï¼Ÿ`
                });
            }
            
            // å¼€èŠ±
            const firstFlower = student.records.findIndex(r => r.flowers > 0);
            if (firstFlower !== -1) {
                insights.push({
                    emoji: 'ğŸ‰',
                    text: `æ­å–œï¼ä½ çš„ç•ªèŒ„åœ¨ç¬¬${firstFlower+1}å¤©å¼€å‡ºäº†ç¬¬ä¸€æœµèŠ± ğŸŒ¸`
                });
            }
            
            // å¹³å‡é€Ÿåº¦
            const totalGrowth = student.records[student.records.length-1].height - student.records[0].height;
            const avgGrowth = (totalGrowth / student.records.length).toFixed(2);
            insights.push({
                emoji: 'ğŸ“Š',
                text: `ä½ çš„ç•ªèŒ„å¹³å‡æ¯å¤©é•¿é«˜${avgGrowth}cm`
            });
            
            const html = insights.map(ins => `
                <div class="card" style="background: linear-gradient(135deg, #FEF3C7, #FDE68A); margin-bottom: 12px;">
                    <div style="display: flex; align-items: start; gap: 16px;">
                        <div style="font-size: 32px;">${ins.emoji}</div>
                        <p style="font-size: 16px; color: #333; flex: 1;">${ins.text}</p>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('insights').innerHTML = html;
        }

        // æ¸²æŸ“è®°å½•è¡¨æ ¼
        function renderRecordTable() {
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            const tbody = document.getElementById('recordTableBody');
            
            const html = student.records.map((record, i) => {
                const growth = i > 0 ? record.height - student.records[i-1].height : 0;
                const growthClass = growth > 0 ? 'color: #4CAF50; font-weight: bold;' : 'color: #999;';
                const growthText = growth > 0 ? `+${growth}cm` : '-';
                
                return `
                    <tr>
                        <td>${record.date}</td>
                        <td>ç¬¬${i+1}å¤©</td>
                        <td><strong>${record.height}cm</strong></td>
                        <td>${record.leaves}</td>
                        <td>${record.flowers}</td>
                        <td>${record.fruits}</td>
                        <td style="${growthClass}">${growthText}</td>
                    </tr>
                `;
            }).join('');
            
            tbody.innerHTML = html;
        }

        // åŠ è½½æ•™å¸ˆç«¯
        function loadTeacherDashboard() {
            const today = new Date().toISOString().split('T')[0];
            
            // è®¡ç®—ç»Ÿè®¡æ•°æ®
            let stats = {
                total: appData.students.length,
                active: 0,
                warning: 0,
                error: 0,
                avgHeight: 0
            };
            
            let totalHeight = 0;
            
            const studentsWithStatus = appData.students.map(student => {
                const lastRecord = student.records[student.records.length - 1];
                const daysSince = lastRecord ? getDaysSince(lastRecord.date) : 999;
                
                let status = 'normal';
                if (student.records.length >= 2) {
                    const last = student.records[student.records.length - 1];
                    const prev = student.records[student.records.length - 2];
                    if (last.height < prev.height - 5) {
                        status = 'error';
                    }
                }
                
                if (status === 'normal' && daysSince > 3) {
                    status = 'warning';
                }
                
                if (status === 'error') stats.error++;
                else if (status === 'warning') stats.warning++;
                else stats.active++;
                
                totalHeight += lastRecord ? lastRecord.height : 0;
                
                return { ...student, status, daysSince, lastRecord };
            });
            
            stats.avgHeight = (totalHeight / stats.total).toFixed(1);
            
            // æ›´æ–°ç»Ÿè®¡å¡ç‰‡
            document.getElementById('teacherTotalStudents').textContent = stats.total;
            document.getElementById('teacherActiveStudents').textContent = stats.active;
            document.getElementById('teacherWarningStudents').textContent = stats.warning;
            document.getElementById('teacherErrorStudents').textContent = stats.error;
            document.getElementById('teacherAvgHeight').textContent = stats.avgHeight;
            
            // ç”Ÿæˆå­¦ç”Ÿåˆ—è¡¨
            const listHtml = studentsWithStatus.map(student => {
                const statusClass = student.status === 'error' ? 'status-error' : 
                                   student.status === 'warning' ? 'status-warning' : 'status-normal';
                const statusText = student.status === 'error' ? 'æ•°æ®å¼‚å¸¸' :
                                  student.status === 'warning' ? `${student.daysSince}å¤©æœªæ›´æ–°` : 'æ­£å¸¸è®°å½•';
                const remindBtn = student.status === 'warning' ? 
                    `<button class="btn btn-outline" onclick="remindStudent('${student.name}')" style="padding: 8px 16px; font-size: 14px;">ğŸ”” æé†’</button>` : '';
                
                return `
                    <div class="card" style="margin-bottom: 12px; cursor: pointer;" onclick="showStudentDetail(${student.id})">
                        <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                            <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                                <span class="status-light ${statusClass}"></span>
                                <div style="font-size: 32px;">${student.avatar}</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 18px;">${student.name}</div>
                                    <div style="font-size: 14px; color: #666;">${statusText}</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 24px; align-items: center;">
                                <div style="text-align: center;">
                                    <div style="font-weight: bold;">${student.lastRecord ? student.lastRecord.height : 0}cm</div>
                                    <div style="font-size: 12px; color: #666;">æ ªé«˜</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-weight: bold;">${student.records.length}</div>
                                    <div style="font-size: 12px; color: #666;">è®°å½•æ•°</div>
                                </div>
                                ${remindBtn}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('teacherStudentList').innerHTML = listHtml;
        }

        // æé†’å­¦ç”Ÿ
        function remindStudent(name) {
            alert(`âœ‰ï¸ å·²å‘${name}å‘é€æé†’ï¼\n\n"å—¨${name}ï¼Œè®°å¾—ç»™ä½ çš„ç•ªèŒ„è®°å½•æ•°æ®å“¦ï¼"`);
        }

        // æ˜¾ç¤ºå­¦ç”Ÿè¯¦æƒ…
        function showStudentDetail(studentId) {
            const student = appData.students.find(s => s.id === studentId);
            if (!student) return;
            
            const lastRecord = student.records[student.records.length - 1] || {};
            const days = getDaysSince(student.plantingDate);
            
            alert(`ğŸ“Š ${student.name}çš„è¯¦ç»†æ¡£æ¡ˆ\n\n` +
                  `å®šæ¤æ—¥æœŸï¼š${student.plantingDate}\n` +
                  `ç§æ¤å¤©æ•°ï¼š${days}å¤©\n` +
                  `ç­‰çº§ï¼šLv.${student.level}\n` +
                  `è®°å½•æ¬¡æ•°ï¼š${student.records.length}æ¬¡\n\n` +
                  `å½“å‰æ•°æ®ï¼š\n` +
                  `æ ªé«˜ï¼š${lastRecord.height || 0}cm\n` +
                  `å¶ç‰‡ï¼š${lastRecord.leaves || 0}\n` +
                  `èŠ±æœµï¼š${lastRecord.flowers || 0}\n` +
                  `æœå®ï¼š${lastRecord.fruits || 0}\n\n` +
                  `è·å¾—å‹‹ç« ï¼š${student.badges.join('ã€')}`);
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>
