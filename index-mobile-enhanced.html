<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ… ç•ªèŒ„ç‹å›½çš„è‡ªç„¶ç¬”è®° - ç§»åŠ¨å¢å¼ºç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #FEFBF5;
            background-image: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: #FF6347;
            color: white;
        }

        .btn-secondary {
            background: #4CAF50;
            color: white;
        }

        .btn-outline {
            background: white;
            color: #FF6347;
            border: 2px solid #FF6347;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            transition: all 0.3s;
        }

        /* é¡µé¢åˆ‡æ¢ */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* ç…§ç‰‡ç›¸å…³æ ·å¼ */
        .photo-upload-area {
            border: 3px dashed #FF6347;
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            background: linear-gradient(135deg, #FFF4E6, #FFE4E1);
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
        }

        .photo-upload-area:hover {
            background: linear-gradient(135deg, #FFE4E1, #FFF4E6);
            transform: scale(1.02);
        }

        .photo-upload-area.has-photo {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
        }

        .photo-preview {
            max-width: 100%;
            border-radius: 12px;
            margin-top: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .photo-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
        }

        .photo-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-item-date {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            color: white;
            padding: 8px;
            font-size: 12px;
            text-align: center;
        }

        .photo-timeline {
            position: relative;
            padding-left: 40px;
            margin: 20px 0;
        }

        .timeline-line {
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, #FF6347, #4CAF50);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 32px;
        }

        .timeline-dot {
            position: absolute;
            left: -27px;
            top: 8px;
            width: 16px;
            height: 16px;
            background: #FF6347;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .timeline-content {
            background: white;
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .timeline-date {
            font-weight: bold;
            color: #FF6347;
            margin-bottom: 8px;
        }

        .timeline-photos {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            overflow-x: auto;
        }

        .timeline-photo {
            width: 100px;
            height: 100px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
        }

        /* è¯„ä»·æŠ¥å‘Šæ ·å¼ */
        .report-section {
            background: linear-gradient(135deg, #FFF4E6, #FFE4E1);
            border-radius: 16px;
            padding: 24px;
            margin: 20px 0;
        }

        .report-title {
            font-size: 24px;
            font-weight: bold;
            color: #FF6347;
            margin-bottom: 16px;
            text-align: center;
        }

        .report-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .report-label {
            font-weight: bold;
            color: #666;
            margin-bottom: 8px;
        }

        .report-value {
            font-size: 18px;
            color: #333;
        }

        .achievement-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 4px;
            box-shadow: 0 2px 8px rgba(255,215,0,0.4);
        }

        /* ç…§ç‰‡ç¯ç®± */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 12px;
        }

        .lightbox-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 36px;
            cursor: pointer;
            background: rgba(255,255,255,0.2);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-info {
            color: white;
            text-align: center;
            margin-top: 16px;
            font-size: 14px;
        }

        /* å…¶ä»–æ ·å¼ä¿æŒä¸å˜ */
        .hero {
            text-align: center;
            margin: 60px 0;
        }

        .hero h1 {
            font-size: 48px;
            color: #FF6347;
            margin-bottom: 16px;
        }

        .entrance-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
            margin: 40px 0;
        }

        .entrance-card {
            cursor: pointer;
            text-align: center;
            padding: 48px 32px;
        }

        .entrance-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            transition: transform 0.3s;
        }

        .entrance-card:hover .entrance-icon {
            transform: scale(1.1);
        }

        .student-icon {
            background: linear-gradient(135deg, #60A5FA, #3B82F6);
        }

        .grid {
            display: grid;
            gap: 16px;
        }

        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }

        @media (max-width: 768px) {
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 32px;
            }
        }

        .nav-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .stat-card {
            text-align: center;
            padding: 20px;
        }

        .stat-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #333;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 4px;
        }

        .badge {
            display: inline-block;
            background: #FEF3C7;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 14px;
            margin: 4px;
        }

        .progress-bar {
            width: 100%;
            height: 16px;
            background: #E5E7EB;
            border-radius: 8px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #66BB6A);
            transition: width 0.5s;
        }

        input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            margin-top: 8px;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #FF6347;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 24px;
            background: linear-gradient(135deg, #E0F2FE, #DBEAFE);
            border-radius: 16px;
        }

        .slider-vertical {
            writing-mode: bt-lr;
            -webkit-appearance: slider-vertical;
            width: 48px;
            height: 300px;
        }

        .height-display {
            font-size: 48px;
            font-weight: bold;
            color: #FF6347;
        }

        .stepper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin: 16px 0;
        }

        .stepper button {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .stepper-minus {
            background: #E5E7EB;
        }

        .stepper-plus {
            background: #4CAF50;
            color: white;
        }

        .stepper-value {
            font-size: 32px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }

        .plant-visual {
            text-align: center;
            padding: 24px;
            background: linear-gradient(180deg, #E0F2FE, #FEFBF5);
            border-radius: 16px;
        }

        .plant-container {
            height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            position: relative;
        }

        .plant-parts {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.5s;
        }

        .soil {
            width: 200px;
            height: 40px;
            background: linear-gradient(180deg, #92400E, #78350F);
            border-radius: 8px 8px 0 0;
        }

        .camera-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¦–é¡µ -->
        <div id="landing" class="page active">
            <div class="hero animate-float">
                <h1>ğŸ… ç•ªèŒ„ç‹å›½ ğŸ…</h1>
                <p style="font-size: 24px; margin: 16px 0;">æ¬¢è¿æ¥åˆ°è‡ªç„¶ç¬”è®°</p>
                <p>è®°å½•æˆé•¿ï¼Œè§è¯ç”Ÿå‘½çš„å¥‡è¿¹</p>
            </div>

            <div class="entrance-cards">
                <div class="card card-hover entrance-card" onclick="goToStudent()">
                    <div class="entrance-icon student-icon">ğŸ“±</div>
                    <h2 style="font-size: 28px; margin-bottom: 16px;">å­¦ç”Ÿç«¯</h2>
                    <p style="color: #666; margin-bottom: 24px;">æ‹ç…§è®°å½•ï¼Œéšæ—¶è§‚å¯Ÿ</p>
                    <button class="btn btn-primary" style="width: 100%;">å¼€å§‹è®°å½•</button>
                </div>

                <div class="card card-hover entrance-card" onclick="goToTeacher()">
                    <div class="entrance-icon" style="background: linear-gradient(135deg, #C084FC, #9333EA);">ğŸ‘¨â€ğŸ«</div>
                    <h2 style="font-size: 28px; margin-bottom: 16px;">æ•™å¸ˆç«¯</h2>
                    <p style="color: #666; margin-bottom: 24px;">è¿‡ç¨‹è¯„ä»·ï¼Œå…¨æ™¯ç®¡ç†</p>
                    <button class="btn btn-secondary" style="width: 100%;">æŸ¥çœ‹ç®¡ç†</button>
                </div>
            </div>

            <div class="card" style="text-align: center; box-shadow: 0 4px 12px rgba(255,99,71,0.3);">
                <p style="font-size: 18px;">
                    ğŸ‰ å…¨æ ¡å·²ç§æ¤ <span style="font-weight: bold; color: #FF6347;" id="totalPlants">0</span> æ£µç•ªèŒ„ï¼Œ
                    ç´¯è®¡æ‹æ‘„ <span style="font-weight: bold; color: #4CAF50;" id="totalPhotos">0</span> å¼ ç…§ç‰‡ï¼
                </p>
            </div>
        </div>

        <!-- å­¦ç”Ÿæ§åˆ¶å° -->
        <div id="student-dashboard" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToLanding()">â† è¿”å›é¦–é¡µ</button>
                <button class="btn btn-secondary" onclick="goToPhotoGallery()">ğŸ“¸ ç…§ç‰‡å¢™</button>
            </div>

            <div class="card">
                <div style="display: flex; align-items: center; gap: 16px; flex-wrap: wrap;">
                    <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #FF6347, #FF4500); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px;">
                        <span id="studentAvatar">ğŸ‘¦</span>
                    </div>
                    <div style="flex: 1;">
                        <h2 style="font-size: 24px; margin-bottom: 4px;" id="studentName">å°æ˜</h2>
                        <p style="color: #666;">ç­‰çº§ <span id="studentLevel">5</span> Â· å®šæ¤ç¬¬ <span id="studentDays">15</span> å¤© Â· å·²æ‹ <span id="studentPhotos">0</span> å¼ </p>
                    </div>
                </div>
            </div>

            <div class="grid grid-2" style="margin-top: 24px;">
                <div>
                    <div class="card">
                        <h3 style="font-size: 20px; margin-bottom: 16px;">ğŸŒ± å¿«æ·æ“ä½œ</h3>
                        <div class="grid grid-2" style="gap: 12px;">
                            <button class="btn btn-primary" onclick="goToDataEntry()" style="padding: 24px; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                                <span style="font-size: 32px;">ğŸ“</span>
                                <span>è®°å½•æ•°æ®</span>
                            </button>
                            <button class="btn btn-secondary" onclick="goToPhotoGallery()" style="padding: 24px; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                                <span style="font-size: 32px;">ğŸ“¸</span>
                                <span>ç…§ç‰‡å¢™</span>
                            </button>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <h3 style="font-size: 20px; margin-bottom: 16px;">ğŸ“Š æˆ‘çš„æ•°æ®</h3>
                        <div class="grid grid-2">
                            <div class="stat-card">
                                <div class="stat-icon">ğŸ“</div>
                                <div class="stat-value" id="currentHeight">0</div>
                                <div class="stat-label">æ ªé«˜(cm)</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">ğŸ“¸</div>
                                <div class="stat-value" id="photoCount">0</div>
                                <div class="stat-label">ç…§ç‰‡æ•°</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="card" style="background: linear-gradient(135deg, #FEF3C7, #FDE68A);">
                        <h3 style="font-size: 20px; margin-bottom: 16px;">ğŸ“‹ ä»Šæ—¥ä»»åŠ¡</h3>
                        <div id="dailyTask"></div>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <h3 style="font-size: 20px; margin-bottom: 16px;">ğŸ“· æœ€æ–°ç…§ç‰‡</h3>
                        <div id="recentPhotos" style="display: flex; gap: 8px; overflow-x: auto;">
                            <div style="text-align: center; color: #999; padding: 32px;">
                                æš‚æ— ç…§ç‰‡
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•°æ®å½•å…¥é¡µï¼ˆå¢å¼ºç…§ç‰‡åŠŸèƒ½ï¼‰ -->
        <div id="data-entry" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToStudent()">â† è¿”å›æ§åˆ¶å°</button>
            </div>

            <div class="card">
                <h2 style="font-size: 28px; margin-bottom: 24px;">ğŸ”¬ ç”Ÿé•¿è®°å½•å®éªŒå®¤</h2>
                
                <form onsubmit="saveRecord(event)">
                    <div style="margin-bottom: 32px;">
                        <label style="font-weight: bold; font-size: 18px;">ğŸ“… è®°å½•æ—¥æœŸ</label>
                        <input type="date" id="recordDate" required>
                    </div>

                    <!-- å¢å¼ºçš„ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->
                    <div style="margin-bottom: 32px;">
                        <label style="font-weight: bold; font-size: 18px; display: block; margin-bottom: 12px;">
                            ğŸ“¸ æ‹ç…§è®°å½•ï¼ˆé‡è¦ï¼ï¼‰
                        </label>
                        <input type="file" accept="image/*" capture="environment" id="photoInput" style="display: none;" onchange="handlePhotoUpload(event)">
                        <div class="photo-upload-area" id="photoUploadArea" onclick="document.getElementById('photoInput').click()">
                            <div class="camera-icon">ğŸ“·</div>
                            <p style="font-size: 18px; font-weight: bold; color: #FF6347; margin-bottom: 8px;">
                                ç‚¹å‡»æ‹ç…§
                            </p>
                            <p style="color: #666; font-size: 14px;">
                                æ”¯æŒç›´æ¥è°ƒç”¨ç›¸æœº
                            </p>
                        </div>
                        <div id="photoPreviewContainer"></div>
                    </div>

                    <div style="margin-bottom: 32px;">
                        <label style="font-weight: bold; font-size: 18px; display: block; margin-bottom: 16px;">ğŸ“ æ ªé«˜æµ‹é‡</label>
                        <div class="slider-container">
                            <div style="display: flex; flex-direction: column; gap: 40px; color: #999;">
                                <span>100cm</span>
                                <span>50cm</span>
                                <span>0cm</span>
                            </div>
                            <input type="range" min="0" max="100" value="20" class="slider-vertical" id="heightSlider" oninput="updateHeightDisplay()">
                            <div style="font-size: 64px;">ğŸŒ±</div>
                            <div>
                                <div class="height-display" id="heightDisplay">20</div>
                                <div style="color: #666;">å˜ç±³</div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-3" style="margin-bottom: 32px;">
                        <div class="card">
                            <label style="font-weight: bold; text-align: center; display: block; margin-bottom: 16px;">
                                <span style="font-size: 32px;">ğŸƒ</span><br>å¶ç‰‡æ•°
                            </label>
                            <div class="stepper">
                                <button type="button" class="stepper-minus" onclick="changeStepper('leaves', -1)">âˆ’</button>
                                <div class="stepper-value" id="leavesValue">4</div>
                                <button type="button" class="stepper-plus" onclick="changeStepper('leaves', 1)">+</button>
                            </div>
                        </div>
                        <div class="card">
                            <label style="font-weight: bold; text-align: center; display: block; margin-bottom: 16px;">
                                <span style="font-size: 32px;">ğŸŒ¸</span><br>èŠ±æœµæ•°
                            </label>
                            <div class="stepper">
                                <button type="button" class="stepper-minus" onclick="changeStepper('flowers', -1)">âˆ’</button>
                                <div class="stepper-value" id="flowersValue">0</div>
                                <button type="button" class="stepper-plus" onclick="changeStepper('flowers', 1)">+</button>
                            </div>
                        </div>
                        <div class="card">
                            <label style="font-weight: bold; text-align: center; display: block; margin-bottom: 16px;">
                                <span style="font-size: 32px;">ğŸ…</span><br>æœå®æ•°
                            </label>
                            <div class="stepper">
                                <button type="button" class="stepper-minus" onclick="changeStepper('fruits', -1)">âˆ’</button>
                                <div class="stepper-value" id="fruitsValue">0</div>
                                <button type="button" class="stepper-plus" onclick="changeStepper('fruits', 1)">+</button>
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 32px;">
                        <label style="font-weight: bold; font-size: 18px;">ğŸ“ è§‚å¯Ÿç¬”è®°</label>
                        <textarea id="notes" rows="4" placeholder="ä»Šå¤©ç•ªèŒ„æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿæˆ‘åšäº†ä»€ä¹ˆ..."></textarea>
                    </div>

                    <div class="grid grid-2">
                        <button type="button" class="btn btn-outline" onclick="goToStudent()">å–æ¶ˆ</button>
                        <button type="submit" class="btn btn-primary">ğŸ’¾ ä¿å­˜è®°å½•</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ç…§ç‰‡å¢™é¡µé¢ -->
        <div id="photo-gallery" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToStudent()">â† è¿”å›æ§åˆ¶å°</button>
                <button class="btn btn-primary" onclick="goToReport()">ğŸ“Š ç”Ÿæˆè¯„ä»·æŠ¥å‘Š</button>
            </div>

            <div class="card">
                <h2 style="font-size: 28px; margin-bottom: 8px;">ğŸ“¸ æˆ‘çš„æˆé•¿ç…§ç‰‡å¢™</h2>
                <p style="color: #666; margin-bottom: 24px;">è®°å½•æ¯ä¸€ä¸ªæˆé•¿ç¬é—´</p>

                <div style="background: #f9f9f9; padding: 16px; border-radius: 12px; margin-bottom: 24px;">
                    <div class="grid grid-3">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“·</div>
                            <div class="stat-value" id="galleryPhotoCount">0</div>
                            <div class="stat-label">æ€»ç…§ç‰‡æ•°</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“…</div>
                            <div class="stat-value" id="galleryDays">0</div>
                            <div class="stat-label">è®°å½•å¤©æ•°</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">â­</div>
                            <div class="stat-value" id="galleryRate">0%</div>
                            <div class="stat-label">è®°å½•ç‡</div>
                        </div>
                    </div>
                </div>

                <h3 style="margin-bottom: 16px;">ğŸ“· ç…§ç‰‡ç½‘æ ¼</h3>
                <div class="photo-gallery" id="photoGalleryGrid">
                    <div style="grid-column: 1/-1; text-align: center; padding: 48px; color: #999;">
                        è¿˜æ²¡æœ‰ç…§ç‰‡ï¼Œå¿«å»æ‹ç…§è®°å½•å§ï¼
                    </div>
                </div>

                <h3 style="margin-top: 40px; margin-bottom: 16px;">ğŸ“… æ—¶é—´è½´</h3>
                <div class="photo-timeline" id="photoTimeline">
                    <div class="timeline-line"></div>
                    <div style="text-align: center; padding: 32px; color: #999;">
                        æš‚æ— è®°å½•
                    </div>
                </div>
            </div>
        </div>

        <!-- è¿‡ç¨‹æ€§è¯„ä»·æŠ¥å‘Šé¡µé¢ -->
        <div id="report" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToPhotoGallery()">â† è¿”å›ç…§ç‰‡å¢™</button>
                <button class="btn btn-secondary" onclick="downloadReport()">ğŸ’¾ ä¸‹è½½æŠ¥å‘Š</button>
            </div>

            <div class="card">
                <div class="report-section">
                    <div class="report-title">ğŸ“ è¿‡ç¨‹æ€§è¯„ä»·æŠ¥å‘Š</div>
                    <div style="text-align: center; color: #666; margin-bottom: 24px;">
                        <span id="reportStudentName">å°æ˜</span> çš„ç•ªèŒ„ç§æ¤å­¦ä¹ æŠ¥å‘Š
                    </div>

                    <div class="report-item">
                        <div class="report-label">ğŸ“Š æ•´ä½“è¯„ä»·</div>
                        <div class="report-value" id="overallScore" style="color: #FF6347;">ä¼˜ç§€</div>
                    </div>

                    <div class="report-item">
                        <div class="report-label">ğŸ“… è§‚å¯Ÿå‘¨æœŸ</div>
                        <div class="report-value">
                            <span id="reportStartDate">2024-01-01</span> è‡³ <span id="reportEndDate">2024-01-15</span>
                            ï¼ˆå…± <span id="reportTotalDays">15</span> å¤©ï¼‰
                        </div>
                    </div>

                    <div class="report-item">
                        <div class="report-label">âœ… è®°å½•å®Œæˆåº¦</div>
                        <div class="report-value">
                            è®°å½• <span id="reportRecordDays">12</span> å¤©ï¼Œå®Œæˆç‡ <span id="reportRate" style="color: #4CAF50;">80%</span>
                        </div>
                    </div>

                    <div class="report-item">
                        <div class="report-label">ğŸ“¸ å½±åƒè®°å½•</div>
                        <div class="report-value">
                            å…±æ‹æ‘„ <span id="reportPhotoCount" style="color: #FF6347;">12</span> å¼ ç…§ç‰‡
                        </div>
                        <div style="margin-top: 12px; display: flex; gap: 8px; overflow-x: auto;" id="reportPhotos">
                            <!-- ç…§ç‰‡ç¼©ç•¥å›¾ -->
                        </div>
                    </div>

                    <div class="report-item">
                        <div class="report-label">ğŸ“ˆ ç”Ÿé•¿æ•°æ®</div>
                        <div class="report-value">
                            åˆå§‹é«˜åº¦ï¼š<span id="reportInitHeight">5</span>cm â†’ 
                            å½“å‰é«˜åº¦ï¼š<span id="reportCurrentHeight">28</span>cm
                            ï¼ˆå¢é•¿ <span style="color: #4CAF50;"><span id="reportGrowth">23</span>cm</span>ï¼‰
                        </div>
                    </div>

                    <div class="report-item">
                        <div class="report-label">ğŸŒŸ è·å¾—æˆå°±</div>
                        <div style="margin-top: 12px;" id="reportBadges">
                            <span class="achievement-badge">ğŸ† å…¨å‹¤è®°å½•å¥–</span>
                            <span class="achievement-badge">ğŸ“¸ æ‘„å½±è¾¾äºº</span>
                            <span class="achievement-badge">ğŸŒ¸ è§è¯å¼€èŠ±</span>
                        </div>
                    </div>

                    <div class="report-item">
                        <div class="report-label">ğŸ’¡ è€å¸ˆè¯„è¯­</div>
                        <div class="report-value" id="reportComment" style="line-height: 1.8; color: #666;">
                            è¯¥å­¦ç”Ÿè§‚å¯Ÿç»†è‡´ï¼Œè®°å½•åŠæ—¶ï¼Œå–„äºç”¨ç…§ç‰‡è®°å½•å…³é”®æ—¶åˆ»ã€‚é€šè¿‡æŒç»­çš„è§‚å¯Ÿï¼Œ
                            å¯¹æ¤ç‰©ç”Ÿé•¿è§„å¾‹æœ‰äº†æ·±å…¥çš„ç†è§£ã€‚å»ºè®®ç»§ç»­ä¿æŒï¼Œå¤šæ€»ç»“åæ€ã€‚
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 32px; padding-top: 24px; border-top: 2px dashed #ddd;">
                        <p style="color: #999; font-size: 14px;">
                            æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š<span id="reportGenerateTime"></span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•™å¸ˆç«¯ -->
        <div id="teacher-dashboard" class="page">
            <div class="nav-bar">
                <button class="btn btn-outline" onclick="goToLanding()">â† è¿”å›é¦–é¡µ</button>
            </div>

            <h1 style="font-size: 32px; margin-bottom: 32px;">ğŸ‘¨â€ğŸ« æ•™å¸ˆç®¡ç†ç«¯</h1>

            <div class="card">
                <h2 style="font-size: 24px; margin-bottom: 24px;">ğŸ“Š ç­çº§ç»Ÿè®¡</h2>
                <div class="grid grid-4">
                    <div class="card" style="background: linear-gradient(135deg, #DBEAFE, #BFDBFE);">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ‘¥</div>
                            <div class="stat-value" id="teacherTotalStudents">0</div>
                            <div class="stat-label">å­¦ç”Ÿæ€»æ•°</div>
                        </div>
                    </div>
                    <div class="card" style="background: linear-gradient(135deg, #D1FAE5, #A7F3D0);">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“¸</div>
                            <div class="stat-value" id="teacherTotalPhotos">0</div>
                            <div class="stat-label">æ€»ç…§ç‰‡æ•°</div>
                        </div>
                    </div>
                    <div class="card" style="background: linear-gradient(135deg, #FEF3C7, #FDE68A);">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“</div>
                            <div class="stat-value" id="teacherTotalRecords">0</div>
                            <div class="stat-label">æ€»è®°å½•æ•°</div>
                        </div>
                    </div>
                    <div class="card" style="background: linear-gradient(135deg, #E9D5FF, #D8B4FE);">
                        <div class="stat-card">
                            <div class="stat-icon">â­</div>
                            <div class="stat-value" id="teacherAvgRate">0%</div>
                            <div class="stat-label">å¹³å‡å®Œæˆç‡</div>
                        </div>
                    </div>
                </div>

                <h3 style="margin: 32px 0 16px;">å­¦ç”Ÿåˆ—è¡¨</h3>
                <div id="teacherStudentList"></div>
            </div>
        </div>
    </div>

    <!-- ç…§ç‰‡ç¯ç®± -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <div class="lightbox-content" onclick="event.stopPropagation()">
            <div class="lightbox-close" onclick="closeLightbox()">Ã—</div>
            <img class="lightbox-image" id="lightboxImage" src="" alt="">
            <div class="lightbox-info" id="lightboxInfo"></div>
        </div>
    </div>

    <script>
        // æ•°æ®å­˜å‚¨
        let appData = {
            currentUser: { id: 1, role: 'student' },
            currentPhoto: null,
            students: [
                {
                    id: 1,
                    name: 'å°æ˜',
                    avatar: 'ğŸ‘¦',
                    level: 5,
                    plantingDate: '2024-01-01',
                    badges: ['å…¨å‹¤è®°å½•å¥–', 'æ‘„å½±è¾¾äºº'],
                    records: []
                },
                {
                    id: 2,
                    name: 'å°çº¢',
                    avatar: 'ğŸ‘§',
                    level: 4,
                    plantingDate: '2024-01-01',
                    badges: ['å…¨å‹¤è®°å½•å¥–'],
                    records: []
                }
            ]
        };

        // åˆå§‹åŒ–
        function init() {
            generateSampleData();
            loadFromLocalStorage();
            updateLandingStats();
            
            const today = new Date().toISOString().split('T')[0];
            if (document.getElementById('recordDate')) {
                document.getElementById('recordDate').value = today;
            }
        }

        // ç”Ÿæˆç¤ºä¾‹æ•°æ®
        function generateSampleData() {
            const start = new Date('2024-01-01');
            
            for (let i = 0; i < 15; i++) {
                const date = new Date(start);
                date.setDate(date.getDate() + i);
                const dateStr = date.toISOString().split('T')[0];
                
                appData.students[0].records.push({
                    date: dateStr,
                    height: Math.floor(5 + i * 1.5 + Math.random() * 2),
                    leaves: Math.floor(2 + i * 0.5),
                    flowers: i > 10 ? Math.floor(Math.random() * 3) : 0,
                    fruits: 0,
                    notes: '',
                    photo: i % 3 === 0 ? 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI0ZGRjRFNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NhTwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjcwJSIgZm9udC1zaXplPSIxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzk5OSI+RGF5ICcgKyAoaSsxKSArICc8L3RleHQ+PC9zdmc+' : null
                });
            }
        }

        // LocalStorage
        function saveToLocalStorage() {
            localStorage.setItem('tomatoKingdom', JSON.stringify(appData));
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('tomatoKingdom');
            if (saved) {
                const savedData = JSON.parse(saved);
                // åˆå¹¶æ•°æ®ï¼Œä¿ç•™ç…§ç‰‡
                appData.students = appData.students.map((student, i) => {
                    const savedStudent = savedData.students?.[i];
                    if (savedStudent) {
                        return {
                            ...student,
                            records: savedStudent.records || student.records
                        };
                    }
                    return student;
                });
            }
        }

        // é¡µé¢å¯¼èˆª
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function goToLanding() {
            showPage('landing');
            updateLandingStats();
        }

        function goToStudent() {
            showPage('student-dashboard');
            loadStudentDashboard();
        }

        function goToTeacher() {
            showPage('teacher-dashboard');
            loadTeacherDashboard();
        }

        function goToDataEntry() {
            showPage('data-entry');
            appData.currentPhoto = null;
        }

        function goToPhotoGallery() {
            showPage('photo-gallery');
            loadPhotoGallery();
        }

        function goToReport() {
            showPage('report');
            generateReport();
        }

        // ç…§ç‰‡ä¸Šä¼ å¤„ç†
        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const photoData = e.target.result;
                appData.currentPhoto = photoData;
                
                // æ›´æ–°ä¸Šä¼ åŒºåŸŸæ ·å¼
                const uploadArea = document.getElementById('photoUploadArea');
                uploadArea.classList.add('has-photo');
                uploadArea.innerHTML = `
                    <div style="font-size: 48px; margin-bottom: 12px;">âœ…</div>
                    <p style="font-size: 18px; font-weight: bold; color: #4CAF50;">ç…§ç‰‡å·²é€‰æ‹©</p>
                    <p style="color: #666; font-size: 14px; margin-top: 8px;">ç‚¹å‡»å¯é‡æ–°æ‹æ‘„</p>
                `;
                
                // æ˜¾ç¤ºé¢„è§ˆ
                const previewContainer = document.getElementById('photoPreviewContainer');
                previewContainer.innerHTML = `
                    <img src="${photoData}" class="photo-preview" alt="é¢„è§ˆ">
                `;
            };
            reader.readAsDataURL(file);
        }

        // æ›´æ–°é¦–é¡µç»Ÿè®¡
        function updateLandingStats() {
            const totalPlants = appData.students.length;
            let totalPhotos = 0;
            
            appData.students.forEach(s => {
                s.records.forEach(r => {
                    if (r.photo) totalPhotos++;
                });
            });
            
            document.getElementById('totalPlants').textContent = totalPlants;
            document.getElementById('totalPhotos').textContent = totalPhotos;
        }

        // åŠ è½½å­¦ç”Ÿæ§åˆ¶å°
        function loadStudentDashboard() {
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            if (!student) return;
            
            document.getElementById('studentAvatar').textContent = student.avatar;
            document.getElementById('studentName').textContent = student.name;
            document.getElementById('studentLevel').textContent = student.level;
            
            const days = getDaysSince(student.plantingDate);
            document.getElementById('studentDays').textContent = days;
            
            // ç»Ÿè®¡ç…§ç‰‡æ•°
            const photoCount = student.records.filter(r => r.photo).length;
            document.getElementById('studentPhotos').textContent = photoCount;
            document.getElementById('photoCount').textContent = photoCount;
            
            // å½“å‰æ•°æ®
            const lastRecord = student.records[student.records.length - 1] || { height: 0 };
            document.getElementById('currentHeight').textContent = lastRecord.height;
            
            // ä»Šæ—¥ä»»åŠ¡
            const today = new Date().toISOString().split('T')[0];
            const hasToday = student.records.some(r => r.date === today);
            
            if (!hasToday) {
                document.getElementById('dailyTask').innerHTML = `
                    <div class="card" style="background: white; border: 2px dashed #FF6347;">
                        <p style="font-size: 18px; margin-bottom: 12px;">ğŸ“¸ ä»»åŠ¡ï¼šæ‹ç…§è®°å½•ä»Šå¤©çš„ç•ªèŒ„</p>
                        <p style="color: #666; margin-bottom: 16px;">åˆ«å¿˜äº†æ‹ç…§å“¦ï¼</p>
                        <button class="btn btn-primary" onclick="goToDataEntry()" style="width: 100%;">ğŸ“ å»è®°å½•</button>
                    </div>
                `;
            } else {
                document.getElementById('dailyTask').innerHTML = `
                    <div class="card" style="background: white;">
                        <p style="font-size: 18px; margin-bottom: 8px;">âœ… ä»Šæ—¥ä»»åŠ¡å·²å®Œæˆï¼</p>
                        <p style="color: #666;">æ˜å¤©ç»§ç»­åŠ æ²¹ï¼</p>
                    </div>
                `;
            }
            
            // æœ€æ–°ç…§ç‰‡
            const photosWithData = student.records.filter(r => r.photo).slice(-4);
            if (photosWithData.length > 0) {
                document.getElementById('recentPhotos').innerHTML = photosWithData.map(r => `
                    <img src="${r.photo}" style="width: 100px; height: 100px; object-fit: cover; border-radius: 12px; cursor: pointer;" 
                         onclick="openLightbox('${r.photo}', '${r.date}')">
                `).join('');
            }
        }

        // åŠ è½½ç…§ç‰‡å¢™
        function loadPhotoGallery() {
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            if (!student) return;
            
            const photosWithData = student.records.filter(r => r.photo);
            const totalDays = getDaysSince(student.plantingDate);
            const recordRate = ((student.records.length / totalDays) * 100).toFixed(0);
            
            document.getElementById('galleryPhotoCount').textContent = photosWithData.length;
            document.getElementById('galleryDays').textContent = student.records.length;
            document.getElementById('galleryRate').textContent = recordRate + '%';
            
            // ç…§ç‰‡ç½‘æ ¼
            if (photosWithData.length > 0) {
                document.getElementById('photoGalleryGrid').innerHTML = photosWithData.map(r => `
                    <div class="photo-item" onclick="openLightbox('${r.photo}', '${r.date}')">
                        <img src="${r.photo}" alt="${r.date}">
                        <div class="photo-item-date">${r.date}</div>
                    </div>
                `).join('');
            } else {
                document.getElementById('photoGalleryGrid').innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 48px; color: #999;">
                        è¿˜æ²¡æœ‰ç…§ç‰‡ï¼Œå¿«å»æ‹ç…§è®°å½•å§ï¼<br>
                        <button class="btn btn-primary" onclick="goToDataEntry()" style="margin-top: 16px;">ğŸ“¸ å»æ‹ç…§</button>
                    </div>
                `;
            }
            
            // æ—¶é—´è½´
            if (student.records.length > 0) {
                document.getElementById('photoTimeline').innerHTML = `
                    <div class="timeline-line"></div>
                    ${student.records.slice().reverse().map(r => `
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <div class="timeline-date">${r.date} (ç¬¬${student.records.indexOf(r) + 1}å¤©)</div>
                                <div>æ ªé«˜: ${r.height}cm Â· å¶ç‰‡: ${r.leaves}ç‰‡</div>
                                ${r.photo ? `
                                    <div class="timeline-photos">
                                        <img src="${r.photo}" class="timeline-photo" onclick="openLightbox('${r.photo}', '${r.date}')">
                                    </div>
                                ` : '<div style="color: #999; font-size: 14px; margin-top: 8px;">æœªæ‹ç…§</div>'}
                                ${r.notes ? `<div style="color: #666; margin-top: 8px; font-size: 14px;">${r.notes}</div>` : ''}
                            </div>
                        </div>
                    `).join('')}
                `;
            }
        }

        // ç”Ÿæˆè¯„ä»·æŠ¥å‘Š
        function generateReport() {
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            if (!student) return;
            
            document.getElementById('reportStudentName').textContent = student.name;
            
            const totalDays = getDaysSince(student.plantingDate);
            const recordDays = student.records.length;
            const recordRate = ((recordDays / totalDays) * 100).toFixed(0);
            const photoCount = student.records.filter(r => r.photo).length;
            
            document.getElementById('reportStartDate').textContent = student.plantingDate;
            document.getElementById('reportEndDate').textContent = new Date().toISOString().split('T')[0];
            document.getElementById('reportTotalDays').textContent = totalDays;
            document.getElementById('reportRecordDays').textContent = recordDays;
            document.getElementById('reportRate').textContent = recordRate + '%';
            document.getElementById('reportPhotoCount').textContent = photoCount;
            
            // ç”Ÿé•¿æ•°æ®
            const firstRecord = student.records[0];
            const lastRecord = student.records[student.records.length - 1];
            if (firstRecord && lastRecord) {
                document.getElementById('reportInitHeight').textContent = firstRecord.height;
                document.getElementById('reportCurrentHeight').textContent = lastRecord.height;
                document.getElementById('reportGrowth').textContent = lastRecord.height - firstRecord.height;
            }
            
            // æ•´ä½“è¯„ä»·
            let score = 'è‰¯å¥½';
            if (recordRate >= 90 && photoCount >= totalDays * 0.7) score = 'ä¼˜ç§€';
            else if (recordRate >= 70 && photoCount >= totalDays * 0.5) score = 'è‰¯å¥½';
            else score = 'åˆæ ¼';
            document.getElementById('overallScore').textContent = score;
            
            // ç…§ç‰‡å±•ç¤º
            const photosWithData = student.records.filter(r => r.photo).slice(0, 8);
            if (photosWithData.length > 0) {
                document.getElementById('reportPhotos').innerHTML = photosWithData.map(r => `
                    <img src="${r.photo}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer;"
                         onclick="openLightbox('${r.photo}', '${r.date}')">
                `).join('');
            }
            
            // ç”Ÿæˆæ—¶é—´
            document.getElementById('reportGenerateTime').textContent = new Date().toLocaleString('zh-CN');
        }

        // ä¸‹è½½æŠ¥å‘Š
        function downloadReport() {
            alert('ğŸ“„ æŠ¥å‘Šå·²ç”Ÿæˆï¼\n\nåŠŸèƒ½è¯´æ˜ï¼š\n1. å¯ä»¥æˆªå›¾ä¿å­˜\n2. æˆ–å¤åˆ¶æ–‡å­—å†…å®¹\n3. æ‰“å°ä¸ºPDFä¿å­˜\n\nå»ºè®®ä½¿ç”¨æµè§ˆå™¨çš„"æ‰“å°"åŠŸèƒ½ï¼Œé€‰æ‹©"ä¿å­˜ä¸ºPDF"');
        }

        // ç…§ç‰‡ç¯ç®±
        function openLightbox(photoSrc, date) {
            document.getElementById('lightboxImage').src = photoSrc;
            document.getElementById('lightboxInfo').textContent = date;
            document.getElementById('lightbox').classList.add('active');
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
        }

        // ä¿å­˜è®°å½•
        function saveRecord(e) {
            e.preventDefault();
            
            const student = appData.students.find(s => s.id === appData.currentUser.id);
            const record = {
                date: document.getElementById('recordDate').value,
                height: parseInt(document.getElementById('heightSlider').value),
                leaves: parseInt(document.getElementById('leavesValue').textContent),
                flowers: parseInt(document.getElementById('flowersValue').textContent),
                fruits: parseInt(document.getElementById('fruitsValue').textContent),
                notes: document.getElementById('notes').value,
                photo: appData.currentPhoto
            };
            
            if (!record.photo) {
                if (!confirm('âš ï¸ è¿˜æ²¡æœ‰æ‹ç…§ï¼Œç¡®å®šè¦ä¿å­˜å—ï¼Ÿ\n\nå»ºè®®æ‹ç…§è®°å½•ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°è§‚å¯Ÿæ¤ç‰©å˜åŒ–ï¼')) {
                    return;
                }
            }
            
            student.records.push(record);
            saveToLocalStorage();
            
            alert('âœ… è®°å½•ä¿å­˜æˆåŠŸï¼' + (record.photo ? '\nğŸ“¸ ç…§ç‰‡å·²ä¿å­˜' : ''));
            goToStudent();
        }

        // å…¶ä»–è¾…åŠ©å‡½æ•°
        function getDaysSince(dateStr) {
            const start = new Date(dateStr);
            const today = new Date();
            const diff = today - start;
            return Math.max(1, Math.ceil(diff / (1000 * 60 * 60 * 24)));
        }

        function updateHeightDisplay() {
            const value = document.getElementById('heightSlider').value;
            document.getElementById('heightDisplay').textContent = value;
        }

        function changeStepper(field, delta) {
            const elem = document.getElementById(field + 'Value');
            let value = parseInt(elem.textContent) + delta;
            value = Math.max(0, value);
            elem.textContent = value;
        }

        // æ•™å¸ˆç«¯
        function loadTeacherDashboard() {
            let totalPhotos = 0;
            let totalRecords = 0;
            let totalDays = 0;
            let totalRecordDays = 0;
            
            appData.students.forEach(s => {
                const days = getDaysSince(s.plantingDate);
                totalDays += days;
                totalRecordDays += s.records.length;
                totalRecords += s.records.length;
                s.records.forEach(r => {
                    if (r.photo) totalPhotos++;
                });
            });
            
            const avgRate = ((totalRecordDays / totalDays) * 100).toFixed(0);
            
            document.getElementById('teacherTotalStudents').textContent = appData.students.length;
            document.getElementById('teacherTotalPhotos').textContent = totalPhotos;
            document.getElementById('teacherTotalRecords').textContent = totalRecords;
            document.getElementById('teacherAvgRate').textContent = avgRate + '%';
            
            // å­¦ç”Ÿåˆ—è¡¨
            const listHtml = appData.students.map(s => {
                const photoCount = s.records.filter(r => r.photo).length;
                const days = getDaysSince(s.plantingDate);
                const rate = ((s.records.length / days) * 100).toFixed(0);
                
                return `
                    <div class="card" style="margin-bottom: 12px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                            <div style="display: flex; align-items: center; gap: 16px;">
                                <div style="font-size: 32px;">${s.avatar}</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 18px;">${s.name}</div>
                                    <div style="font-size: 14px; color: #666;">è®°å½•${s.records.length}å¤© Â· æ‹æ‘„${photoCount}å¼  Â· å®Œæˆç‡${rate}%</div>
                                </div>
                            </div>
                            <button class="btn btn-outline" onclick="viewStudentReport(${s.id})" style="padding: 8px 16px;">ğŸ“Š æŸ¥çœ‹æŠ¥å‘Š</button>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('teacherStudentList').innerHTML = listHtml;
        }

        function viewStudentReport(studentId) {
            appData.currentUser = { id: studentId, role: 'student' };
            goToReport();
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>
